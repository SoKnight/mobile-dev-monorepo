# Приложение на React Native с картой и уведомлениями

Мобильное приложение с картой, локальной БД и уведомлениями, реализованное на React Native / Expo и позволяющее:
- Изучать карту, находить интересные места
- Добавлять маркеры в найденных местах
- Задавать заголовок и описание каждому маркеру
- Прикреплять фотографии к маркерам
- Удалять фотографии и маркеры

**Выполнил: Пермяков Константин, ИПО-4**

## Основные требования

> [!IMPORTANT]
> Перечисленные ниже требования относятся именно к тому сценарию, когда приложение запускается через Expo Go на Android-устройстве.
> Требования в случае запуска на iOS-устройстве или в web-версии не задокументированы.

1. Необходимые зависимости должны быть установлены:
   ```bash
   npm install
   ```
2. Миграции Drizzle должны быть сгенерированы:
   ```bash
   npx drizzle-kit generate
   ```
3. Android-устройство должно быть подключено к одной WiFi сети вместе с ПК.

## Запуск

Для запуска приложения сначала необходимо запустить Expo Go сервер на ПК:
```bash
npx expo start
```

Далее необходимо подключиться к серверу с Android-устройства:
- **Через ADB (Android Debug Bridge)**
  Нажмите `a` в терминале сервера Expo Go, чтобы запустить приложение
> [!WARNING]
> Android-устройство должно быть подключено по ADB к ПК через кабель или WiFi.
- **Через QR-код**
  Отсканируйте QR-код в терминале сервера Expo Go с Android-устройства, чтобы запустить приложение

## Особенности реализации

Работа с гео-локацией выполняется из `LocationService`.<br>
Реализована функция вычисления расстояния из координат двух точек в `#calculateDistance`.<br>
Также реализованы функции получения текущей локации и управления уведомлениями о приближении к маркерам.

Управление уведомлениями происходит в `NotificationService`.<br>
Сервис хранит набор уникальный ключей `knownNotificationIds`, что позволяет избежать
дублирующихся уведомлений на один и тот же маркер на момент отправки первого из них.<br>
При удалении уведомления, оно сначала убирается из очереди, а затем убирается активное
уведомление для данного маркера.

Для работы гео-локацией и отправки уведомлений запрашиваются разрешения без каких-либо
предупреждающих модалок в приложении. Ошибки при запросе разрешений и работе с гео-локацией и уведомлениями
обрабатываются самым простым способом — происходит вывод ошибки в консоль.

## License

This project is open-source and licensed under the [MIT license](/LICENSE).
